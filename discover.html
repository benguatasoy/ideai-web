<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discover | IDEAI</title>
    <link rel="stylesheet" href="menu.css">
    <style>
    :root {
        --main-gradient: linear-gradient(90deg, #a8edea 0%, #fed6e3 100%);
        --main-bg: #f7f9fa;
        --accent1: #a8edea;
        --accent2: #fed6e3;
        --accent3: #fcb69f;
        --accent4: #f6d365;
        --accent5: #cfd9df;
        --primary: #2980ef;
        --secondary: #f1c40f;
        --card-bg: #fff;
        --card-shadow: 0 4px 24px rgba(44,62,80,0.10);
        --border-radius: 18px;
        --filter-bg: #f7f9fa;
        --filter-border: #e3eaf2;
        --icon-bg1: #a8edea;
        --icon-bg2: #fed6e3;
        --icon-bg3: #fcb69f;
        --icon-bg4: #f6d365;
        --icon-bg5: #cfd9df;
    }
    
    /* Hamburger menu */
    .hamburger {
        position: absolute;
        top: -32px;
        left: 24px;
        width: 32px;
        height: 32px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        cursor: pointer;
        z-index: 2;
    }
    .hamburger span {
        display: block;
        height: 4px;
        width: 100%;
        background: #2c3e50;
        border-radius: 2px;
    }

    /* Profile card */
    .profile-card {
        position: absolute;
        top: -32px;
        right: 24px;
        display: flex;
        align-items: center;
        background: #fff;
        border-radius: 16px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.07);
        padding: 6px 16px 6px 6px;
        z-index: 2;
    }
    .profile-card img {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        object-fit: cover;
        margin-right: 10px;
    }
    .profile-card .name {
        font-weight: 600;
        color: #2c3e50;
        margin-right: 8px;
    }
    .profile-card .initials {
        background: #e3eaf2;
        color: #2c3e50;
        border-radius: 8px;
        padding: 2px 8px;
        font-size: 14px;
        font-weight: 500;
    }
    
    /* Side menu */
    .side-menu {
        position: fixed;
        top: 0;
        left: -300px;
        width: 280px;
        height: 100vh;
        background: #fff;
        box-shadow: 2px 0 8px rgba(0,0,0,0.1);
        z-index: 1000;
        transition: left 0.3s ease;
        padding-top: 60px;
    }
    .side-menu.open {
        left: 0;
    }
    .side-menu ul {
        list-style: none;
        padding: 0;
        margin: 0;
    }
    .side-menu li {
        margin: 0;
    }
    .side-menu a {
        display: block;
        padding: 18px 28px;
        color: #22314a;
        text-decoration: none;
        font-weight: 500;
        font-size: 1rem;
        font-family: 'Segoe UI', Arial, sans-serif;
        border-bottom: 1px solid #e3eaf2;
        transition: background 0.2s;
    }
    .side-menu a:hover {
        background: #f8f9fa;
    }
    .side-menu-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(0,0,0,0.3);
        z-index: 999;
        display: none;
    }
    body {
        background: var(--main-bg);
        font-family: 'Segoe UI', Arial, sans-serif;
        margin: 0;
        padding: 0;
        color: #22314a;
        position: relative;
        min-height: 100vh;
        overflow-x: hidden;
    }
    /* Dalga SVG arka plan */
    .wave-bg {
        position: absolute;
        top: 0; left: 0; width: 100vw; height: 340px;
        z-index: 0;
        pointer-events: none;
    }
    /* Header with Back Button */
    .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 24px 32px;
        position: relative;
        z-index: 10;
    }
    
    .logo {
        font-size: 2.5rem;
        font-weight: 900;
        background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-decoration: none;
        letter-spacing: -0.5px;
    }
    
    .back-btn {
        background: rgba(59, 130, 246, 0.1);
        color: #3b82f6;
        border: 1px solid rgba(59, 130, 246, 0.2);
        padding: 12px 20px;
        border-radius: 12px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        text-decoration: none;
        font-size: 0.9rem;
        backdrop-filter: blur(10px);
    }
    
    .back-btn:hover {
        background: rgba(59, 130, 246, 0.2);
        border-color: rgba(59, 130, 246, 0.4);
        transform: translateY(-1px);
        box-shadow: 0 8px 24px rgba(59, 130, 246, 0.2);
    }
    
    .discover-main {
        max-width: 1300px;
        margin: 0 auto;
        padding: 48px 16px 64px 16px;
        position: relative;
        z-index: 1;
    }
    .discover-header {
        text-align: center;
        margin-bottom: 36px;
        position: relative;
    }
    .discover-header h1 {
        font-size: 2.5rem;
        font-weight: 800;
        color: #22314a;
        margin: 0 0 10px 0;
        letter-spacing: 1px;
        text-shadow: 0 2px 4px rgba(34, 49, 74, 0.1);
    }
    .discover-header p {
        font-size: 1.2rem;
        color: #4a5a6a;
        margin: 0;
    }
    .discover-search-section {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 32px;
        gap: 12px;
        position: relative;
        z-index: 2;
    }
    .discover-search-input {
        width: 400px;
        padding: 14px 22px;
        border: none;
        border-radius: 12px;
        font-size: 1.15rem;
        background: var(--accent5);
        box-shadow: 0 2px 12px rgba(44,62,80,0.07);
        transition: box-shadow 0.2s, background 0.2s;
        position: relative;
    }
    .discover-search-input:focus {
        background: #fff;
        box-shadow: 0 4px 18px rgba(41,128,239,0.13);
        outline: none;
    }
    
    /* Gelişmiş Arama Container */
    .search-container {
        position: relative;
        display: inline-block;
    }
    
    /* Autocomplete Dropdown */
    .autocomplete-dropdown {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 8px 32px rgba(44,62,80,0.15);
        z-index: 1000;
        max-height: 300px;
        overflow-y: auto;
        display: none;
        margin-top: 4px;
    }
    
    .autocomplete-item {
        padding: 12px 18px;
        cursor: pointer;
        border-bottom: 1px solid #f0f0f0;
        transition: background 0.2s;
        display: flex;
        align-items: center;
        gap: 12px;
    }
    
    .autocomplete-item:last-child {
        border-bottom: none;
    }
    
    .autocomplete-item:hover {
        background: var(--accent1);
    }
    
    .autocomplete-item .icon {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
        background: var(--icon-bg1);
    }
    
    .autocomplete-item .content {
        flex: 1;
    }
    
    .autocomplete-item .title {
        font-weight: 600;
        color: #22314a;
        margin-bottom: 2px;
    }
    
    .autocomplete-item .subtitle {
        font-size: 0.9rem;
        color: #7b8ca6;
    }
    
    .autocomplete-item .highlight {
        background: var(--accent2);
        padding: 1px 4px;
        border-radius: 4px;
        font-weight: 600;
    }
    
    /* Arama Sonuçları Vurgulama */
    .search-highlight {
        background: var(--accent2);
        padding: 2px 4px;
        border-radius: 4px;
        font-weight: 600;
        color: #22314a;
    }
    
    /* Arama İstatistikleri */
    .search-stats {
        background: var(--accent1);
        color: #22314a;
        padding: 8px 16px;
        border-radius: 8px;
        font-size: 0.9rem;
        font-weight: 600;
        margin-top: 8px;
        text-align: center;
        display: none;
    }
    
    /* Demo Badge */
    .demo-badge {
        position: absolute;
        top: 8px;
        left: 8px;
        background: rgba(255, 255, 255, 0.9);
        color: #7b8ca6;
        font-size: 0.7rem;
        font-weight: 600;
        padding: 2px 6px;
        border-radius: 4px;
        backdrop-filter: blur(4px);
        border: 1px solid rgba(123, 140, 166, 0.2);
        z-index: 3;
        opacity: 0.8;
        transition: opacity 0.2s;
    }
    
    .demo-badge:hover {
        opacity: 1;
    }
    
    /* Demo Badge için özel konumlandırma */
    .featured-card .demo-badge {
        top: 6px;
        left: 6px;
        font-size: 0.65rem;
        padding: 1px 5px;
    }
    
    .project-card .demo-badge {
        top: 8px;
        left: 8px;
    }
    .discover-search-btn {
        background: var(--main-gradient);
        color: #22314a;
        border: none;
        border-radius: 12px;
        padding: 14px 32px;
        font-size: 1.15rem;
        font-weight: 700;
        cursor: pointer;
        box-shadow: 0 2px 12px rgba(44,62,80,0.07);
        transition: background 0.2s;
    }
    .discover-search-btn:hover {
        background: linear-gradient(90deg, #fcb69f 0%, #a8edea 100%);
    }
    .discover-section-title {
        font-size: 1.4rem;
        font-weight: 700;
        margin-bottom: 18px;
        color: #22314a;
        letter-spacing: 0.5px;
    }
    .discover-featured-section {
        margin-bottom: 36px;
    }
    .discover-featured-list {
        display: flex;
        gap: 28px;
        flex-wrap: wrap;
        justify-content: center;
    }
    .featured-card {
        background: var(--card-bg);
        border-radius: var(--border-radius);
        box-shadow: var(--card-shadow);
        padding: 28px 32px;
        display: flex;
        align-items: center;
        gap: 18px;
        min-width: 260px;
        max-width: 320px;
        flex: 1 1 260px;
        transition: box-shadow 0.2s, transform 0.2s;
        position: relative;
        border: 2px solid #fff;
        background-image: linear-gradient(120deg, #a8edea22 0%, #fed6e322 100%);
        cursor: pointer;
    }
    .featured-card .score {
        position: absolute;
        top: 12px;
        right: 18px;
        background: var(--primary);
        color: #fff;
        border-radius: 8px;
        padding: 2px 10px;
        font-size: 1rem;
        font-weight: 700;
        box-shadow: 0 2px 8px #a8edea55;
    }
    .featured-card:hover {
        box-shadow: 0 8px 32px rgba(41,128,239,0.18);
        transform: translateY(-4px) scale(1.03);
        border-color: var(--accent1);
    }
    .featured-card .avatar {
        width: 58px;
        height: 58px;
        border-radius: 50%;
        background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        color: #2980ef;
        font-size: 2.1rem;
        font-weight: 800;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 8px #fed6e355;
        border: 3px solid var(--icon-bg2);
    }
    .featured-card .socials {
        margin-top: 6px;
        display: flex;
        gap: 8px;
    }
    .featured-card .socials a {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 28px;
        height: 28px;
        border-radius: 50%;
        background: var(--icon-bg3);
        color: #fff;
        font-size: 1.1rem;
        text-decoration: none;
        transition: background 0.2s;
    }
    .featured-card .socials a:hover {
        background: var(--primary);
    }
    .discover-content-wrapper {
        display: flex;
        gap: 32px;
    }
    .discover-filters {
        background: var(--filter-bg);
        border-radius: var(--border-radius);
        box-shadow: 0 2px 12px rgba(44,62,80,0.07);
        padding: 32px 22px;
        min-width: 260px;
        max-width: 300px;
        flex: 0 0 260px;
        margin-bottom: 32px;
        height: fit-content;
        border: 1.5px solid var(--filter-border);
    }
    .discover-filters h3 {
        font-size: 1.15rem;
        margin-bottom: 18px;
        color: #22314a;
    }
    .filter-group {
        margin-bottom: 22px;
    }
    .filter-group label {
        display: block;
        font-size: 1rem;
        margin-bottom: 6px;
        color: #22314a;
        font-weight: 500;
    }
    .filter-group input[type="checkbox"] {
        accent-color: var(--primary);
        margin-right: 7px;
        transform: scale(1.2);
    }
    .filter-group input[type="range"] {
        width: 100%;
        margin-top: 6px;
        accent-color: var(--primary);
    }
    .filter-group select {
        width: 100%;
        padding: 10px 12px;
        border-radius: 8px;
        border: 1.5px solid var(--filter-border);
        background: #fff;
        font-size: 1rem;
        margin-top: 6px;
    }
    .filter-reset-btn {
        background: var(--main-gradient);
        color: #22314a;
        border: none;
        border-radius: 8px;
        padding: 12px 18px;
        font-size: 1rem;
        font-weight: 700;
        cursor: pointer;
        width: 100%;
        margin-top: 10px;
        box-shadow: 0 2px 8px #a8edea33;
        transition: background 0.2s;
    }
    .filter-reset-btn:hover {
        background: linear-gradient(90deg, #fcb69f 0%, #a8edea 100%);
    }
    .discover-projects-section {
        flex: 1 1 0%;
    }
    .discover-projects-list {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 32px;
    }
    .project-card {
        background: var(--card-bg);
        border-radius: var(--border-radius);
        box-shadow: var(--card-shadow);
        padding: 32px 32px 26px 32px;
        display: flex;
        flex-direction: column;
        gap: 12px;
        transition: box-shadow 0.2s, transform 0.2s;
        min-height: 180px;
        position: relative;
        border: 2px solid #fff;
        background-image: linear-gradient(120deg, #fcb69f22 0%, #a8edea22 100%);
    }
    .project-card .badge {
        position: absolute;
        top: 12px;
        right: 18px;
        background: var(--secondary);
        color: #22314a;
        border-radius: 8px;
        padding: 2px 10px;
        font-size: 1rem;
        font-weight: 700;
        box-shadow: 0 2px 8px #f6d36555;
    }
    .project-card:hover {
        box-shadow: 0 8px 32px rgba(41,128,239,0.18);
        transform: translateY(-4px) scale(1.03);
        border-color: var(--accent3);
    }
    .project-card h2 {
        font-size: 1.2rem;
        font-weight: 700;
        margin: 0 0 6px 0;
        color: #22314a;
    }
    .project-card p {
        font-size: 1rem;
        color: #4a5a6a;
        margin: 0 0 8px 0;
    }
    .project-card small {
        color: #7b8ca6;
        font-size: 0.95rem;
    }
    .project-card .logo {
        width: 48px;
        height: 48px;
        border-radius: 12px;
        background: var(--icon-bg1);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        font-weight: 700;
        color: #fff;
        margin-bottom: 8px;
        box-shadow: 0 2px 8px #a8edea55;
    }
    .project-card .tags {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        margin-bottom: 6px;
    }
    .project-card .tag {
        background: var(--accent2);
        color: #22314a;
        border-radius: 8px;
        padding: 2px 10px;
        font-size: 0.95rem;
        font-weight: 600;
        box-shadow: 0 1px 4px #fed6e355;
    }
    .project-card .stats {
        display: flex;
        gap: 18px;
        font-size: 0.98rem;
        color: #4a5a6a;
        margin-bottom: 4px;
    }
    .project-card .details-btn {
        margin-top: 8px;
        background: var(--main-gradient);
        color: #22314a;
        border: none;
        border-radius: 8px;
        padding: 8px 18px;
        font-size: 1rem;
        font-weight: 700;
        cursor: pointer;
        box-shadow: 0 2px 8px #a8edea33;
        transition: background 0.2s;
        opacity: 0;
        pointer-events: none;
    }
    .project-card:hover .details-btn {
        opacity: 1;
        pointer-events: auto;
    }
    .project-card .fav-btn {
        position: absolute;
        top: 16px;
        left: 18px;
        background: none;
        border: none;
        cursor: pointer;
        font-size: 1.6rem;
        color: #e74c3c;
        transition: transform 0.15s;
        z-index: 2;
        opacity: 0.85;
    }
    .project-card .fav-btn.fav {
        color: #e74c3c;
        text-shadow: 0 2px 8px #e74c3c33;
        transform: scale(1.15);
        opacity: 1;
    }
    .project-card .fav-btn:not(.fav) {
        color: #cfd9df;
        text-shadow: none;
        opacity: 0.7;
    }
    .project-card .fav-btn:active {
        transform: scale(1.25);
    }
    .modal-overlay {
        position: fixed;
        top: 0; left: 0; width: 100vw; height: 100vh;
        background: rgba(44,62,80,0.18);
        backdrop-filter: blur(4px);
        z-index: 1000;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: opacity 0.2s;
    }
    .modal {
        background: #fff;
        border-radius: 22px;
        box-shadow: 0 8px 48px rgba(44,62,80,0.18);
        padding: 38px 36px 28px 36px;
        min-width: 340px;
        max-width: 98vw;
        max-height: 90vh;
        overflow-y: auto;
        position: relative;
        animation: modalIn 0.18s cubic-bezier(.4,1.6,.6,1) both;
    }
    @keyframes modalIn {
        from { opacity: 0; transform: translateY(40px) scale(0.97); }
        to { opacity: 1; transform: none; }
    }
    .modal-close {
        position: absolute;
        top: 18px; right: 22px;
        background: none;
        border: none;
        font-size: 2rem;
        color: #cfd9df;
        cursor: pointer;
        transition: color 0.2s;
    }
    .modal-close:hover {
        color: #e74c3c;
    }
    .modal .logo {
        margin: 0 auto 12px auto;
        display: block;
    }
    .modal .tags {
        justify-content: center;
        margin-bottom: 10px;
    }
    .modal .badge {
        display: inline-block;
        margin-bottom: 10px;
    }
    .modal .fav-btn {
        position: static;
        margin: 0 0 10px 0;
        font-size: 2rem;
        display: inline-block;
        vertical-align: middle;
    }
    .modal .stats {
        justify-content: center;
        margin-bottom: 10px;
    }
    .modal h2 {
        text-align: center;
        margin: 0 0 10px 0;
        font-size: 1.4rem;
        font-weight: 800;
        background: var(--main-gradient);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }
    .modal p {
        text-align: center;
        font-size: 1.08rem;
        color: #4a5a6a;
        margin-bottom: 16px;
    }
    @media (max-width: 900px) {
        .discover-content-wrapper {
            flex-direction: column;
        }
        .discover-filters {
            max-width: 100%;
            min-width: unset;
            margin-bottom: 24px;
        }
    }
    @media (max-width: 600px) {
        .discover-main {
            padding: 12px 2px 32px 2px;
        }
        .discover-header h1 {
            font-size: 1.5rem;
        }
        .discover-search-input {
            width: 100%;
            min-width: 0;
        }
        .discover-featured-list {
            flex-direction: column;
            gap: 16px;
        }
        .discover-projects-list {
            grid-template-columns: 1fr;
        }
    }
    
    /* Comprehensive Mobile Responsive Design */
    @media (max-width: 768px) {
        /* Header adjustments */
        .header {
            padding: 16px 20px;
        }
        
        .logo {
            font-size: 2rem;
        }
        
        .back-btn {
            padding: 10px 16px;
            font-size: 0.85rem;
        }
        
        .discover-header h1 {
            font-size: 2rem;
            margin-bottom: 8px;
        }
        
        .discover-header p {
            font-size: 1rem;
            line-height: 1.4;
        }
        
        /* Search section */
        .discover-search-section {
            flex-direction: column;
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .discover-search-input {
            width: 100%;
            max-width: 100%;
            font-size: 16px; /* Prevents zoom on iOS */
        }
        
        .discover-search-btn {
            width: 100%;
            padding: 14px;
            font-size: 16px;
        }
        
        /* Featured section */
        .discover-featured-list {
            grid-template-columns: 1fr;
            gap: 16px;
        }
        
        /* Filters */
        .discover-filters {
            position: sticky;
            top: 0;
            background: white;
            z-index: 100;
            padding: 16px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .filter-group {
            margin-bottom: 16px;
        }
        
        .filter-group label {
            font-size: 14px;
            margin-bottom: 8px;
        }
        
        /* Project cards */
        .discover-projects-list {
            grid-template-columns: 1fr;
            gap: 16px;
        }
        
        .project-card {
            padding: 16px;
            border-radius: 12px;
        }
        
        .project-title {
            font-size: 1.1rem;
        }
        
        .project-description {
            font-size: 0.9rem;
            line-height: 1.4;
        }
        
        /* Project actions */
        .project-actions {
            flex-direction: column;
            gap: 8px;
        }
        
        .like-btn, .comment-btn, .details-btn {
            width: 100%;
            justify-content: center;
            padding: 12px;
            font-size: 14px;
        }
        
        /* Comments modal */
        .comments-modal-content {
            width: 95%;
            padding: 20px;
            max-height: 90vh;
        }
        
        /* Favorites modal */
        .favorites-modal-content {
            width: 95%;
            padding: 20px;
            max-height: 90vh;
        }
    }
    
    @media (max-width: 480px) {
        /* Extra small screens */
        .header {
            padding: 12px 16px;
        }
        
        .logo {
            font-size: 1.8rem;
        }
        
        .back-btn {
            padding: 8px 12px;
            font-size: 0.8rem;
        }
        
        .discover-main {
            padding: 8px 8px 24px 8px;
        }
        
        .discover-header h1 {
            font-size: 1.8rem;
        }
        
        .discover-header p {
            font-size: 0.9rem;
        }
        
        .discover-search-section {
            margin-bottom: 20px;
        }
        
        .discover-search-input {
            padding: 12px 16px;
        }
        
        .discover-search-btn {
            padding: 12px;
        }
        
        .project-card {
            padding: 12px;
        }
        
        .project-title {
            font-size: 1rem;
        }
        
        .project-description {
            font-size: 0.85rem;
        }
        
        .project-stats {
            flex-direction: column;
            gap: 8px;
            text-align: center;
        }
        
        .project-tags {
            flex-wrap: wrap;
            gap: 6px;
        }
        
        .project-tag {
            font-size: 0.7rem;
            padding: 4px 8px;
        }
        
        /* Hamburger menu adjustments */
        .hamburger {
            top: -28px;
            left: 16px;
            width: 28px;
            height: 28px;
        }
        
        .profile-card {
            top: -28px;
            right: 16px;
            padding: 4px 12px 4px 4px;
        }
        
        .profile-card img {
            width: 28px;
            height: 28px;
        }
        
        .profile-card .name {
            font-size: 12px;
        }
    }
    
    /* Project Actions Styles */
    .project-actions {
        display: flex;
        gap: 12px;
        margin-top: 16px;
        justify-content: center;
        flex-wrap: wrap;
    }
    
    .like-btn, .comment-btn, .details-btn {
        background: #f7fafd;
        border: 2px solid #e3f6fc;
        border-radius: 12px;
        padding: 8px 16px;
        font-size: 0.9rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
        color: #3d4c5c;
        display: flex;
        align-items: center;
        gap: 6px;
    }
    
    .like-btn:hover, .comment-btn:hover, .details-btn:hover {
        background: #e3f6fc;
        border-color: #2980ef;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(41,128,239,0.2);
    }
    
    .like-btn.liked {
        background: #ff6b6b;
        border-color: #ff6b6b;
        color: white;
    }
    
    .like-btn.liked:hover {
        background: #ff5252;
        border-color: #ff5252;
    }
    
    /* Comments Modal Styles */
    .comments-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.5);
        z-index: 1000;
        display: none;
        backdrop-filter: blur(5px);
    }
    
    .comments-modal-content {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        padding: 32px;
        width: 90%;
        max-width: 600px;
        max-height: 80vh;
        overflow-y: auto;
    }
    
    .comments-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 24px;
        padding-bottom: 16px;
        border-bottom: 2px solid #f0f0f0;
    }
    
    .comments-title {
        font-size: 1.5rem;
        font-weight: 700;
        color: #22314a;
    }
    
    .close-comments-btn {
        background: none;
        border: none;
        font-size: 2rem;
        cursor: pointer;
        color: #3d4c5c;
        padding: 0;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        transition: all 0.2s;
    }
    
    .close-comments-btn:hover {
        background: #f7fafd;
        color: #22314a;
    }
    
    .comments-list {
        margin-bottom: 24px;
        max-height: 400px;
        overflow-y: auto;
    }
    
    .comment-item {
        background: #f7fafd;
        border-radius: 12px;
        padding: 16px;
        margin-bottom: 12px;
        border-left: 4px solid #2980ef;
    }
    
    .comment-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 8px;
    }
    
    .comment-author {
        font-weight: 600;
        color: #22314a;
        font-size: 0.9rem;
    }
    
    .comment-date {
        font-size: 0.8rem;
        color: #7b8ca6;
    }
    
    .comment-text {
        color: #3d4c5c;
        line-height: 1.5;
    }
    
    .add-comment-form {
        border-top: 2px solid #f0f0f0;
        padding-top: 24px;
    }
    
    .comment-input {
        width: 100%;
        padding: 12px;
        border: 2px solid #e3f6fc;
        border-radius: 12px;
        font-size: 1rem;
        resize: vertical;
        min-height: 80px;
        margin-bottom: 16px;
        font-family: inherit;
    }
    
    .comment-input:focus {
        outline: none;
        border-color: #2980ef;
        background: white;
    }
    
    .add-comment-btn {
        background: linear-gradient(90deg, #2ecc71 0%, #27ae60 100%);
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 12px;
        font-weight: 600;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.2s;
    }
    
    .add-comment-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 16px rgba(46,204,113,0.3);
    }
    
    .add-comment-btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
    }
    </style>
</head>
<body>
    <div class="wave-bg">
        <svg viewBox="0 0 1440 340" fill="none" xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" preserveAspectRatio="none">
            <path d="M0,160L60,154.7C120,149,240,139,360,154.7C480,171,600,213,720,218.7C840,224,960,192,1080,170.7C1200,149,1320,139,1380,133.3L1440,128L1440,0L1380,0C1320,0,1200,0,1080,0C960,0,840,0,720,0C600,0,480,0,360,0C240,0,120,0,60,0L0,0Z" fill="#a8edea" fill-opacity="0.45"/>
            <path d="M0,240L60,218.7C120,197,240,155,360,133.3C480,112,600,112,720,128C840,144,960,176,1080,186.7C1200,197,1320,187,1380,181.3L1440,176L1440,0L1380,0C1320,0,1200,0,1080,0C960,0,840,0,720,0C600,0,480,0,360,0C240,0,120,0,60,0L0,0Z" fill="#fed6e3" fill-opacity="0.35"/>
            <path d="M0,320L60,293.3C120,267,240,213,360,197.3C480,181,600,203,720,213.3C840,224,960,224,1080,213.3C1200,203,1320,181,1380,170.7L1440,160L1440,0L1380,0C1320,0,1200,0,1080,0C960,0,840,0,720,0C600,0,480,0,360,0C240,0,120,0,60,0L0,0Z" fill="#fcb69f" fill-opacity="0.25"/>
        </svg>
    </div>
    <header>
        <nav>
            <div class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="profile-card" id="profile-card">
                <img src="https://via.placeholder.com/36x36" alt="Profile" id="profile-img">
                <span class="name" id="profile-name">Guest</span>
                <span class="initials" id="profile-initials">G</span>
            </div>
        </nav>
        <div id="side-menu" class="side-menu">
            <div id="side-menu-list"></div>
        </div>
        <div id="side-menu-overlay" class="side-menu-overlay"></div>
    </header>
    
    <!-- Header with Back Button -->
    <div class="header">
        <a href="index.html.html" class="logo">IDEAI</a>
        <a href="index.html.html" class="back-btn">← Back to Home</a>
    </div>
    
    <main class="discover-main">
        <div class="discover-header">
            <h1>Discover</h1>
            <p>Explore new projects, featured entrepreneurs and investors. Filter, search and get inspired!</p>
        </div>
        <section class="discover-search-section">
            <div class="search-container">
                <input type="text" id="discover-search" class="discover-search-input" placeholder="Search projects or users..." autocomplete="off">
                <div id="autocomplete-dropdown" class="autocomplete-dropdown"></div>
            </div>
            <button id="discover-search-btn" class="discover-search-btn">Search</button>
        </section>
        <div id="search-stats" class="search-stats"></div>
        <section class="discover-featured-section">
            <h2 class="discover-section-title">Featured</h2>
            <div id="discover-featured-list" class="discover-featured-list">
                <!-- Öne çıkan kullanıcı kartları buraya gelecek -->
            </div>
        </section>
        <div class="discover-content-wrapper">
            <aside class="discover-filters">
                <h3>Filter</h3>
                <div class="filter-group">
                    <label>Categories</label>
                    <div id="filter-category-group">
                        <label><input type="checkbox" value="tech"> Technology</label><br>
                        <label><input type="checkbox" value="health"> Health</label><br>
                        <label><input type="checkbox" value="finance"> Finance</label><br>
                        <label><input type="checkbox" value="education"> Education</label><br>
                        <label><input type="checkbox" value="other"> Other</label>
                    </div>
                </div>
                <div class="filter-group">
                    <label>Status</label>
                    <div id="filter-status-group">
                        <label><input type="checkbox" value="active"> Active</label><br>
                        <label><input type="checkbox" value="completed"> Completed</label>
                    </div>
                </div>
                <div class="filter-group">
                    <label>Likes (min)</label>
                    <input type="range" id="filter-likes" min="0" max="50" value="0">
                    <span id="filter-likes-value">0</span>
                </div>
                <div class="filter-group">
                    <label>Sort</label>
                    <select id="filter-sort">
                        <option value="">Default</option>
                        <option value="most-liked">Most Liked</option>
                        <option value="newest">Newest</option>
                        <option value="most-funded">Most Funded</option>
                    </select>
                </div>
                <button id="filter-reset" class="filter-reset-btn">Reset Filters</button>
            </aside>
            <section class="discover-projects-section">
                <h2 class="discover-section-title">Projects</h2>
                <div id="discover-projects-list" class="discover-projects-list">
                    <!-- Proje kartları buraya gelecek -->
                </div>
            </section>
        </div>
    </main>
    <div id="modal-root"></div>
    
    <!-- Comments Modal -->
    <div id="commentsModal" class="comments-modal">
        <div class="comments-modal-content">
            <div class="comments-header">
                <div class="comments-title">Comments</div>
                <button class="close-comments-btn" onclick="closeComments()">&times;</button>
            </div>
            <div id="commentsList" class="comments-list">
                <!-- Comments will be loaded here -->
            </div>
            <div class="add-comment-form">
                <textarea id="commentInput" class="comment-input" placeholder="Write your comment..." maxlength="500"></textarea>
                <button id="addCommentBtn" class="add-comment-btn" onclick="addComment()">Add Comment</button>
            </div>
        </div>
    </div>
    
    <!-- Favorites Modal -->
    <div id="favoritesModal" class="comments-modal">
        <div class="comments-modal-content">
            <div class="comments-header">
                <div class="comments-title">My Favorites</div>
                <button class="close-comments-btn" onclick="closeFavorites()">&times;</button>
            </div>
            <div id="favoritesList" class="comments-list">
                <!-- Favorites will be loaded here -->
            </div>
        </div>
    </div>
    
    <script src="menu.js"></script>
    <script>
    // ÖRNEK VERİLER
    const featuredUsers = [
        { firstname: "Ali", lastname: "Yılmaz", username: "aliyilmaz", userType: "investor", score: 8.0 },
        { firstname: "Ayşe", lastname: "Demir", username: "aysedemir", userType: "investor", score: 8.2 },
        { firstname: "Mehmet", lastname: "Kaya", username: "mehmetkaya", userType: "investor", score: 8.1 },
        { firstname: "Elif", lastname: "Çelik", username: "elifcelik", userType: "investor", score: 8.3 },
        { firstname: "Burak", lastname: "Şahin", username: "buraksahin", userType: "investor", score: 8.0 }
    ];
    const featuredUsersEntrepreneur = [
        { firstname: "Zeynep", lastname: "Aydın", username: "zeynepaydin", userType: "entrepreneur", score: 8.1 },
        { firstname: "Emre", lastname: "Koç", username: "emrekoc", userType: "entrepreneur", score: 8.0 },
        { firstname: "Fatma", lastname: "Güneş", username: "fatmagunes", userType: "entrepreneur", score: 8.2 },
        { firstname: "Can", lastname: "Yıldız", username: "canyildiz", userType: "entrepreneur", score: 8.0 },
        { firstname: "Deniz", lastname: "Kurt", username: "denizkurt", userType: "entrepreneur", score: 8.3 }
    ];
    // Demo projects (will be mixed with real user projects)
    const demoProjects = [
        { title: "AI-Powered Health Platform", description: "A platform that analyzes patient health data and provides recommendations to doctors.", category: "health", creator: "sarahjohnson", likes: 42, status: "active", funding: 80, badge: "Bestseller", logo: "🧬", tags: ["AI", "Health", "New"], comments: 12, investors: 3, isDemo: true },
        { title: "Online Education Portal", description: "A platform offering interactive and personalized educational content for all ages.", category: "education", creator: "michaelchen", likes: 35, status: "active", funding: 60, logo: "📚", tags: ["Education", "Popular"], comments: 8, investors: 2, isDemo: true },
        { title: "Finansal Danışmanlık Uygulaması", description: "KOBİ'ler için finansal analiz ve yatırım önerileri sunan mobil uygulama.", category: "finance", creator: "mehmetkaya", likes: 28, status: "completed", funding: 100, badge: "Bestseller", logo: "💸", tags: ["Finance", "AI"], comments: 15, investors: 4, isDemo: true },
        { title: "Smart Home Automation System", description: "IoT-based system for remote control of home devices.", category: "tech", creator: "davidkim", likes: 22, status: "active", funding: 40, logo: "🏠", tags: ["IoT", "Technology"], comments: 5, investors: 1, isDemo: true },
        { title: "Dijital Kitaplık", description: "Kullanıcıların kitaplarını dijital ortamda saklayıp paylaşabildiği bir platform.", category: "other", creator: "aysedemir", likes: 18, status: "active", funding: 30, logo: "📖", tags: ["Books", "New"], comments: 3, investors: 1, isDemo: true },
        { title: "Sağlıklı Yaşam Takipçisi", description: "Kişisel sağlık hedeflerini takip eden ve öneriler sunan mobil uygulama.", category: "health", creator: "elifcelik", likes: 25, status: "completed", funding: 90, logo: "🏃‍♂️", tags: ["Health", "Mobile"], comments: 7, investors: 2, isDemo: true },
        { title: "Çevrimiçi Mentorluk Platformu", description: "Girişimciler ve yatırımcıları buluşturan, mentorluk desteği sunan platform.", category: "tech", creator: "buraksahin", likes: 30, status: "active", funding: 70, logo: "🤝", tags: ["Mentorship", "Technology", "Popular"], comments: 10, investors: 3, isDemo: true },
        { title: "Çocuklar için Kodlama Atölyesi", description: "Çocuklara kodlama öğretmek için oyunlaştırılmış eğitim platformu.", category: "education", creator: "fatmagunes", likes: 20, status: "active", funding: 50, logo: "👾", tags: ["Education", "Kids"], comments: 4, investors: 1, isDemo: true }
    ];
    
    // Combined projects array (will be populated with demo + real projects)
    let projects = [...demoProjects];

    // Kullanıcı tipini localStorage'dan al (varsayılan: entrepreneur)
    const userType = localStorage.getItem('userType') || 'entrepreneur';

    // Öne çıkan kullanıcıları getir ve göster
    function loadFeaturedUsers() {
        const featuredList = document.getElementById('discover-featured-list');
        const data = userType === 'entrepreneur' ? featuredUsers : featuredUsersEntrepreneur;
                featuredList.innerHTML = data.slice(0, 4).map(user => `
            <div class="featured-card" onclick="viewUserProfile('${user.username}', '${user.userType}')">
                <div class="demo-badge">Demo</div>
                <div class="avatar" style="background: linear-gradient(135deg, #${Math.floor(Math.random()*16777215).toString(16)} 0%, #fed6e3 100%);">${user.firstname[0] || ''}${user.lastname[0] || ''}</div>
                <div>
                    <strong>${user.firstname} ${user.lastname}</strong><br>
                    <span>@${user.username}</span><br>
                    <span>${user.userType === 'entrepreneur' ? 'Entrepreneur' : 'Investor'}</span>
                    <div class="socials">
                        <a href="#" title="LinkedIn" onclick="event.stopPropagation(); openLinkedIn('${user.username}')"><svg width="16" height="16" fill="currentColor"><circle cx="8" cy="8" r="8"/></svg></a>
                        <a href="#" title="Mail" onclick="event.stopPropagation(); openEmail('${user.username}')"><svg width="16" height="16" fill="currentColor"><rect width="16" height="12" y="2" rx="3"/></svg></a>
                    </div>
                </div>
                <span class="score">${user.score}</span>
            </div>
        `).join('');
    }

    function getFavs() {
        return JSON.parse(localStorage.getItem('discoverFavs') || '[]');
    }
    function setFavs(favs) {
        localStorage.setItem('discoverFavs', JSON.stringify(favs));
    }
    function isFav(title) {
        return getFavs().includes(title);
    }
    function toggleFav(title) {
        let favs = getFavs();
        if (favs.includes(title)) {
            favs = favs.filter(t => t !== title);
        } else {
            favs.push(title);
        }
        setFavs(favs);
        loadProjects(window._lastFilters || {}, window._lastSearch || '');
    }

    function showModal(project) {
        const modalRoot = document.getElementById('modal-root');
        const fav = isFav(project.title);
        modalRoot.innerHTML = `
            <div class="modal-overlay" onclick="closeModal(event)">
                <div class="modal" onclick="event.stopPropagation()">
                    <button class="modal-close" onclick="closeModal(event)">&times;</button>
                    <div class="logo">${project.logo || '🚀'}</div>
                    <div class="tags">${(project.tags||[]).map(tag => `<span class='tag'>${tag}</span>`).join('')}</div>
                    ${project.badge ? `<span class=\"badge\">${project.badge}</span>` : ''}
                    <button class="fav-btn${fav ? ' fav' : ''}" title="Favorilere ekle/kaldır" onclick="toggleFav('${project.title.replace(/'/g, "\\'") }'); event.stopPropagation();">
                        ${fav ? '❤️' : '🤍'}
                    </button>
                    <h2>${project.title}</h2>
                    <p>${project.description}</p>
                    <div class="stats">
                        <span>💬 ${project.comments || 0} comments</span>
                        <span>👥 ${project.investors || 0} investors</span>
                        <span>💰 %${project.funding}</span>
                    </div>
                    <small>Category: ${project.category || ''} | Created by: ${project.creator || ''}</small><br>
                    <small>Likes: ${project.likes || 0} | Status: ${project.status || ''}</small>
                </div>
            </div>
        `;
    }
    function closeModal(e) {
        document.getElementById('modal-root').innerHTML = '';
    }

    // Load real user projects from backend
    function loadRealUserProjects() {
        fetch('http://localhost:5000/api/projects')
            .then(response => response.json())
            .then(data => {
                if (data.success && data.projects && data.projects.length > 0) {
                    // Convert backend projects to frontend format
                    const realProjects = data.projects.map(project => ({
                        title: project.title,
                        description: project.description,
                        category: project.category || 'tech',
                        creator: project.creator || project.username,
                        likes: project.likes || 0,
                        status: project.status || 'active',
                        funding: Math.floor(Math.random() * 100) + 10, // Demo funding
                        logo: getCategoryLogo(project.category || 'tech'),
                        tags: [project.category || 'tech', 'New'],
                        comments: 0,
                        investors: Math.floor(Math.random() * 5) + 1, // Demo investors
                        isDemo: false,
                        createdAt: project.createdAt
                    }));
                    
                    // Combine demo and real projects, limit to 50
                    projects = [...demoProjects, ...realProjects].slice(0, 50);
                } else {
                    // If no real projects, just use demo projects
                    projects = [...demoProjects];
                }
                
                // Reload projects with current filters
                loadProjects(window._lastFilters || {});
            })
            .catch(error => {
                console.error('Error loading real projects:', error);
                // If error, just use demo projects
                projects = [...demoProjects];
                loadProjects(window._lastFilters || {});
            });
    }
    
    // Get category logo
    function getCategoryLogo(category) {
        const logos = {
            tech: '🚀',
            health: '🧬',
            education: '📚',
            fashion: '👗',
            environment: '🌱',
            art: '🎨',
            business: '💼',
            media: '📱',
            science: '🔬',
            pets: '🐕',
            finance: '💸',
            other: '📦'
        };
        return logos[category] || '🚀';
    }
    
    // Projeleri getir ve göster
    function loadProjects(filters = {}) {
        window._lastFilters = filters;
        const listEl = document.getElementById('discover-projects-list');
        let filtered = [...projects];
        
        // Kategori (çoklu)
        if (filters.categories && filters.categories.length > 0) {
            filtered = filtered.filter(p => filters.categories.includes(p.category));
        }
        // Durum (çoklu)
        if (filters.statuses && filters.statuses.length > 0) {
            filtered = filtered.filter(p => filters.statuses.includes(p.status));
        }
        // Beğeni (min)
        if (filters.minLikes) {
            filtered = filtered.filter(p => (p.likes || 0) >= filters.minLikes);
        }
        // Sıralama
        if (filters.sort === 'most-liked') {
            filtered = filtered.sort((a, b) => b.likes - a.likes);
        } else if (filters.sort === 'newest') {
            filtered = filtered.sort((a, b) => b.title.localeCompare(a.title));
        } else if (filters.sort === 'most-funded') {
            filtered = filtered.sort((a, b) => (b.funding || 0) - (a.funding || 0));
        }
        
        if (filtered.length > 0) {
            listEl.innerHTML = filtered.map(project => `
                <div class="project-card">
                    ${project.isDemo ? '<div class="demo-badge">Demo</div>' : '<div class="demo-badge" style="background: #10b981; color: white;">Live</div>'}
                    <button class="fav-btn${isFav(project.title) ? ' fav' : ''}" title="Favorilere ekle/kaldır" onclick="toggleFav('${project.title.replace(/'/g, "\\'") }')">
                        ${isFav(project.title) ? '❤️' : '🤍'}
                    </button>
                    <div class="logo">${project.logo || '🚀'}</div>
                    <div class="tags">${(project.tags||[]).map(tag => `<span class='tag'>${tag}</span>`).join('')}</div>
                    <h2>${project.title}</h2>
                    <p>${project.description}</p>
                    <div class="stats">
                        <span>💬 ${project.comments || 0} comments</span>
                        <span>👥 ${project.investors || 0} investors</span>
                        <span>💰 %${project.funding}</span>
                    </div>
                    <small>Category: ${project.category || ''} | Created by: ${project.creator || ''}</small><br>
                    <small>Likes: ${project.likes || 0} | Status: ${project.status || ''}</small>
                    ${project.badge ? `<span class=\"badge\">${project.badge}</span>` : ''}
                    <div class="project-actions">
                        <button class="like-btn" onclick="toggleLike('${project.title.replace(/'/g, "\\'")}')" data-liked="${project.liked || false}">
                            ${project.liked ? '❤️' : '🤍'} ${project.likes || 0}
                        </button>
                        <button class="comment-btn" onclick="showComments('${project.title.replace(/'/g, "\\'")}')">
                            💬 ${project.comments || 0}
                        </button>
                        <button class="details-btn" onclick='showModal(${JSON.stringify(project).replace(/'/g, "\\'") })'>Details</button>
                    </div>
                </div>
            `).join('');
        } else {
            listEl.innerHTML = '<p>No projects found.</p>';
        }
    }

    // Filtre işlemleri
    function setupDiscoverFilters() {
        const categoryGroup = document.getElementById('filter-category-group');
        const statusGroup = document.getElementById('filter-status-group');
        const likesInput = document.getElementById('filter-likes');
        const likesValue = document.getElementById('filter-likes-value');
        const sortSel = document.getElementById('filter-sort');
        const resetBtn = document.getElementById('filter-reset');

        let filters = {
            categories: [],
            statuses: [],
            minLikes: 0,
            sort: '',
        };

        function reload() {
            loadProjects(filters);
        }

        categoryGroup.querySelectorAll('input[type="checkbox"]').forEach(cb => {
            cb.addEventListener('change', () => {
                filters.categories = Array.from(categoryGroup.querySelectorAll('input[type="checkbox"]:checked')).map(c => c.value);
                reload();
            });
        });
        statusGroup.querySelectorAll('input[type="checkbox"]').forEach(cb => {
            cb.addEventListener('change', () => {
                filters.statuses = Array.from(statusGroup.querySelectorAll('input[type="checkbox"]:checked')).map(c => c.value);
                reload();
            });
        });
        likesInput.addEventListener('input', e => {
            filters.minLikes = Number(e.target.value);
            likesValue.textContent = e.target.value;
            reload();
        });
        sortSel.addEventListener('change', e => {
            filters.sort = e.target.value;
            reload();
        });
        resetBtn.addEventListener('click', () => {
            filters = { categories: [], statuses: [], minLikes: 0, sort: '' };
            categoryGroup.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
            statusGroup.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
            likesInput.value = 0;
            likesValue.textContent = 0;
            sortSel.value = '';
            reload();
        });
    }

    // Gelişmiş Arama Fonksiyonları
    let searchTimeout;
    let allSearchData = [];
    
    // Tüm arama verilerini hazırla
    function prepareSearchData() {
        allSearchData = [
            // Projeler
            ...projects.map(project => ({
                type: 'project',
                title: project.title,
                description: project.description,
                category: project.category,
                creator: project.creator,
                logo: project.logo,
                tags: project.tags || [],
                id: project.id || project.title
            })),
            // Kullanıcılar
            ...featuredUsers.map(user => ({
                type: 'user',
                title: `${user.firstname} ${user.lastname}`,
                description: `@${user.username}`,
                category: user.userType === 'entrepreneur' ? 'Entrepreneur' : 'Investor',
                creator: user.username,
                logo: `${user.firstname[0]}${user.lastname[0]}`,
                score: user.score,
                id: user.username
            })),
            ...featuredUsersEntrepreneur.map(user => ({
                type: 'user',
                title: `${user.firstname} ${user.lastname}`,
                description: `@${user.username}`,
                category: user.userType === 'entrepreneur' ? 'Entrepreneur' : 'Investor',
                creator: user.username,
                logo: `${user.firstname[0]}${user.lastname[0]}`,
                score: user.score,
                id: user.username
            }))
        ];
    }
    
    // Metni vurgula
    function highlightText(text, searchTerm) {
        if (!searchTerm) return text;
        const regex = new RegExp(`(${searchTerm})`, 'gi');
        return text.replace(regex, '<span class="search-highlight">$1</span>');
    }
    
    // Autocomplete göster
    function showAutocomplete(searchTerm) {
        const dropdown = document.getElementById('autocomplete-dropdown');
        if (!searchTerm || searchTerm.length < 2) {
            dropdown.style.display = 'none';
            return;
        }
        
        const results = allSearchData.filter(item => 
            item.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
            item.description.toLowerCase().includes(searchTerm.toLowerCase()) ||
            item.category.toLowerCase().includes(searchTerm.toLowerCase()) ||
            (item.tags && item.tags.some(tag => tag.toLowerCase().includes(searchTerm.toLowerCase())))
        ).slice(0, 8);
        
        if (results.length === 0) {
            dropdown.style.display = 'none';
            return;
        }
        
        dropdown.innerHTML = results.map(item => `
            <div class="autocomplete-item" onclick="${item.type === 'user' ? `viewUserProfile('${item.id}', '${item.category.toLowerCase().includes('entrepreneur') ? 'entrepreneur' : 'investor'}')` : `selectAutocompleteItem('${item.id}', '${item.type}')`}">
                <div class="icon">${item.logo}</div>
                <div class="content">
                    <div class="title">${highlightText(item.title, searchTerm)}</div>
                    <div class="subtitle">
                        ${item.type === 'project' ? '📁 Project' : '👤 User'} • 
                        ${highlightText(item.category, searchTerm)}
                        ${item.score ? ` • ⭐ ${item.score}` : ''}
                    </div>
                </div>
            </div>
        `).join('');
        
        dropdown.style.display = 'block';
    }
    
    // Autocomplete öğesi seç
    function selectAutocompleteItem(id, type) {
        const searchInput = document.getElementById('discover-search');
        const item = allSearchData.find(item => item.id === id && item.type === type);
        
        if (item) {
            searchInput.value = item.title;
            document.getElementById('autocomplete-dropdown').style.display = 'none';
            
            // Arama yap
            performAdvancedSearch(item.title);
        }
    }
    
    // Gelişmiş arama yap
    function performAdvancedSearch(searchTerm) {
        if (!searchTerm) {
            loadProjects();
            loadFeaturedUsers();
            document.getElementById('search-stats').style.display = 'none';
            return;
        }
        
        const projectResults = projects.filter(project => 
            project.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
            project.description.toLowerCase().includes(searchTerm.toLowerCase()) ||
            project.category.toLowerCase().includes(searchTerm.toLowerCase()) ||
            (project.tags && project.tags.some(tag => tag.toLowerCase().includes(searchTerm.toLowerCase())))
        );
        
        const userResults = [...featuredUsers, ...featuredUsersEntrepreneur].filter(user => 
            `${user.firstname} ${user.lastname}`.toLowerCase().includes(searchTerm.toLowerCase()) ||
            user.username.toLowerCase().includes(searchTerm.toLowerCase()) ||
            user.userType.toLowerCase().includes(searchTerm.toLowerCase())
        );
        
        // Projeleri vurgulayarak göster
        loadProjectsWithHighlight(projectResults, searchTerm);
        
        // Kullanıcıları vurgulayarak göster
        loadFeaturedUsersWithHighlight(userResults, searchTerm);
        
        // İstatistikleri göster
        showSearchStats(projectResults.length, userResults.length, searchTerm);
    }
    
    // Projeleri vurgulayarak yükle
    function loadProjectsWithHighlight(filteredProjects, searchTerm) {
        const listEl = document.getElementById('discover-projects-list');
        
        if (filteredProjects.length > 0) {
            listEl.innerHTML = filteredProjects.map(project => `
                <div class="project-card">
                    <div class="demo-badge">Demo</div>
                    <button class="fav-btn${isFav(project.title) ? ' fav' : ''}" title="Favorilere ekle/kaldır" onclick="toggleFav('${project.title.replace(/'/g, "\\'") }')">
                        ${isFav(project.title) ? '❤️' : '🤍'}
                    </button>
                    <div class="logo">${project.logo || '🚀'}</div>
                    <div class="tags">${(project.tags||[]).map(tag => `<span class='tag'>${highlightText(tag, searchTerm)}</span>`).join('')}</div>
                    <h2>${highlightText(project.title, searchTerm)}</h2>
                    <p>${highlightText(project.description, searchTerm)}</p>
                    <div class="stats">
                        <span>💬 ${project.comments || 0} comments</span>
                        <span>👥 ${project.investors || 0} investors</span>
                        <span>💰 %${project.funding}</span>
                    </div>
                    <small>Category: ${highlightText(project.category, searchTerm)} | Created by: ${highlightText(project.creator, searchTerm)}</small><br>
                    <small>Likes: ${project.likes || 0} | Status: ${project.status || ''}</small>
                    ${project.badge ? `<span class=\"badge\">${project.badge}</span>` : ''}
                    <button class="details-btn" onclick='showModal(${JSON.stringify(project).replace(/'/g, "\\'") })'>Details</button>
                </div>
            `).join('');
        } else {
            listEl.innerHTML = '<p>No projects found matching your search criteria.</p>';
        }
    }
    
    // Kullanıcıları vurgulayarak yükle
    function loadFeaturedUsersWithHighlight(filteredUsers, searchTerm) {
        const featuredList = document.getElementById('discover-featured-list');
        const data = userType === 'entrepreneur' ? filteredUsers.filter(u => u.userType === 'investor') : filteredUsers.filter(u => u.userType === 'entrepreneur');
        
        if (data.length > 0) {
            featuredList.innerHTML = data.slice(0, 4).map(user => `
                <div class="featured-card" onclick="viewUserProfile('${user.username}', '${user.userType}')">
                    <div class="demo-badge">Demo</div>
                    <div class="avatar" style="background: linear-gradient(135deg, #${Math.floor(Math.random()*16777215).toString(16)} 0%, #fed6e3 100%);">${user.firstname[0] || ''}${user.lastname[0] || ''}</div>
                    <div>
                        <strong>${highlightText(`${user.firstname} ${user.lastname}`, searchTerm)}</strong><br>
                        <span>${highlightText(`@${user.username}`, searchTerm)}</span><br>
                        <span>${highlightText(user.userType === 'entrepreneur' ? 'Entrepreneur' : 'Investor', searchTerm)}</span>
                        <div class="socials">
                            <a href="#" title="LinkedIn" onclick="event.stopPropagation(); openLinkedIn('${user.username}')"><svg width="16" height="16" fill="currentColor"><circle cx="8" cy="8" r="8"/></svg></a>
                            <a href="#" title="Mail" onclick="event.stopPropagation(); openEmail('${user.username}')"><svg width="16" height="16" fill="currentColor"><rect width="16" height="12" y="2" rx="3"/></svg></a>
                        </div>
                    </div>
                    <span class="score">${user.score}</span>
                </div>
            `).join('');
        } else {
            featuredList.innerHTML = '<p>No users found matching your search criteria.</p>';
        }
    }
    
    // Arama istatistiklerini göster
    function showSearchStats(projectCount, userCount, searchTerm) {
        const statsEl = document.getElementById('search-stats');
        if (projectCount > 0 || userCount > 0) {
            statsEl.innerHTML = `Found ${projectCount} projects and ${userCount} users for "${searchTerm}"`;
            statsEl.style.display = 'block';
        } else {
            statsEl.style.display = 'none';
        }
    }
    
    // Gelişmiş arama event listener'ları
    function setupAdvancedSearch() {
        const searchInput = document.getElementById('discover-search');
        const searchBtn = document.getElementById('discover-search-btn');
        
        // Arama input event
        searchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value.trim();
            
            // Autocomplete göster
            showAutocomplete(searchTerm);
            
            // Debounce ile arama
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                performAdvancedSearch(searchTerm);
            }, 300);
        });
        
        // Arama butonu
        searchBtn.addEventListener('click', () => {
            const searchTerm = searchInput.value.trim();
            performAdvancedSearch(searchTerm);
            document.getElementById('autocomplete-dropdown').style.display = 'none';
        });
        
        // Enter tuşu
        searchInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                const searchTerm = searchInput.value.trim();
                performAdvancedSearch(searchTerm);
                document.getElementById('autocomplete-dropdown').style.display = 'none';
            }
        });
        
        // Dışarı tıklama
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.search-container')) {
                document.getElementById('autocomplete-dropdown').style.display = 'none';
            }
        });
    }
    
    // Menü fonksiyonları
    function renderUserArea() {
        const username = localStorage.getItem('username');
        const firstname = localStorage.getItem('firstname');
        const profileName = document.getElementById('profile-name');
        const profileInitials = document.getElementById('profile-initials');
        
        if (username) {
            profileName.textContent = firstname || username;
            profileInitials.textContent = (firstname || username).charAt(0).toUpperCase();
        } else {
            profileName.textContent = 'Guest';
            profileInitials.textContent = 'G';
        }
    }
    
    function renderSideMenu() {
        const username = localStorage.getItem('username');
        const userType = localStorage.getItem('userType');
        const sideMenuList = document.getElementById('side-menu-list');
        let html = '';
        
        if (username) {
            if (userType === 'entrepreneur') {
                html += `<li><a href="entrepreneur-account.html">Account</a></li>`;
                html += `<li><a href="my-ideas.html">My Ideas</a></li>`;
                html += `<li><a href="discover.html">Discover</a></li>`;
                html += `<li><a href="help-support.html">Help & Support</a></li>`;
                html += `<li><a href="about.html">About IDEAI</a></li>`;
                html += `<li><a href="contact.html">Contact Us</a></li>`;
                html += `<li><a href="#" onclick="logout()">Logout</a></li>`;
            } else if (userType === 'investor') {
                html += `<li><a href="#">Account</a></li>`;
                html += `<li><a href="#">Investment Portfolio</a></li>`;
                html += `<li><a href="#">Messages</a></li>`;
                html += `<li><a href="discover.html">Discover</a></li>`;
                html += `<li><a href="#" onclick="showFavorites()">My Favorites</a></li>`;
                html += `<li><a href="help-support.html">Help & Support</a></li>`;
                html += `<li><a href="about.html">About IDEAI</a></li>`;
                html += `<li><a href="contact.html">Contact Us</a></li>`;
                html += `<li><a href="#" onclick="logout()">Logout</a></li>`;
            } else {
                html += `<li><a href="#">Account</a></li>`;
                html += `<li><a href="#">Favorites</a></li>`;
                html += `<li><a href="#" onclick="logout()">Logout</a></li>`;
            }
        } else {
            html += `<li><a href="about.html">About IDEAI</a></li>`;
            html += `<li><a href="help-support.html">Help & Support</a></li>`;
            html += `<li><a href="contact.html">Contact Us</a></li>`;
            html += `<li><a href="signup.html">Sign Up</a></li>`;
        }
        sideMenuList.innerHTML = html;
    }
    
    function logout() {
        localStorage.removeItem('username');
        localStorage.removeItem('firstname');
        localStorage.removeItem('userType');
        renderUserArea();
        renderSideMenu();
        // Menüyü kapat
        document.getElementById('side-menu').style.display = 'none';
        document.getElementById('side-menu-overlay').style.display = 'none';
    }
    
    // Menü event listener'ları
    document.addEventListener('DOMContentLoaded', function() {
        const hamburger = document.getElementById('hamburger');
        const sideMenu = document.getElementById('side-menu');
        const sideMenuOverlay = document.getElementById('side-menu-overlay');
        
        renderUserArea();
        renderSideMenu();
        
        hamburger.addEventListener('click', function() {
            renderSideMenu();
            sideMenu.style.display = 'block';
            sideMenuOverlay.style.display = 'block';
            setTimeout(() => {
                sideMenu.classList.add('open');
            }, 10);
        });
        
        sideMenuOverlay.addEventListener('click', function() {
            sideMenu.classList.remove('open');
            setTimeout(() => {
                sideMenu.style.display = 'none';
                sideMenuOverlay.style.display = 'none';
            }, 300);
        });
        
        // ESC ile menüyü kapat
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                sideMenu.classList.remove('open');
                setTimeout(() => {
                    sideMenu.style.display = 'none';
                    sideMenuOverlay.style.display = 'none';
                }, 300);
            }
        });
    });
    
    // Kullanıcı profil fonksiyonları
    function viewUserProfile(username, userType) {
        // Demo için alert göster, normalde profil sayfasına yönlendirir
        if (username.includes('demo') || username.includes('test')) {
            alert(`Demo: ${username} profilini görüntülemek için tıkladınız.\n\nGerçek uygulamada bu kullanıcının profil sayfasına yönlendirilirsiniz.`);
        } else {
            // Normal kullanıcılar için profil sayfasına yönlendir
            if (userType === 'entrepreneur') {
                window.location.href = `entrepreneur-profile.html?username=${username}`;
            } else {
                window.location.href = `investor-profile.html?username=${username}`;
            }
        }
    }
    
    function openLinkedIn(username) {
        // Demo için alert göster
        alert(`Demo: ${username} LinkedIn profilini açmak için tıkladınız.\n\nGerçek uygulamada LinkedIn profili açılır.`);
    }
    
    function openEmail(username) {
        // Demo için alert göster
        alert(`Demo: ${username} e-posta göndermek için tıkladınız.\n\nGerçek uygulamada e-posta uygulaması açılır.`);
    }
    
    // Like/Unlike functionality
    function toggleLike(projectTitle) {
        const username = localStorage.getItem('username');
        if (!username) {
            alert('Please sign in to like projects.');
            return;
        }
        
        // Get current likes from localStorage
        let projectLikes = JSON.parse(localStorage.getItem('projectLikes') || '{}');
        let userLikes = JSON.parse(localStorage.getItem('userLikes') || '{}');
        
        if (!userLikes[username]) {
            userLikes[username] = [];
        }
        
        const isLiked = userLikes[username].includes(projectTitle);
        
        if (isLiked) {
            // Unlike
            userLikes[username] = userLikes[username].filter(title => title !== projectTitle);
            projectLikes[projectTitle] = Math.max(0, (projectLikes[projectTitle] || 0) - 1);
        } else {
            // Like
            userLikes[username].push(projectTitle);
            projectLikes[projectTitle] = (projectLikes[projectTitle] || 0) + 1;
        }
        
        // Save to localStorage
        localStorage.setItem('projectLikes', JSON.stringify(projectLikes));
        localStorage.setItem('userLikes', JSON.stringify(userLikes));
        
        // Update UI
        loadProjects(window._lastFilters || {}, window._lastSearch || '');
    }
    
    // Comments functionality
    let currentProjectForComments = '';
    
    function showComments(projectTitle) {
        const username = localStorage.getItem('username');
        if (!username) {
            alert('Please sign in to view comments.');
            return;
        }
        
        currentProjectForComments = projectTitle;
        document.getElementById('commentsModal').style.display = 'block';
        loadComments(projectTitle);
    }
    
    function closeComments() {
        document.getElementById('commentsModal').style.display = 'none';
        document.getElementById('commentInput').value = '';
        currentProjectForComments = '';
    }
    
    function loadComments(projectTitle) {
        const comments = JSON.parse(localStorage.getItem('projectComments') || '{}');
        const projectComments = comments[projectTitle] || [];
        const commentsList = document.getElementById('commentsList');
        
        if (projectComments.length === 0) {
            commentsList.innerHTML = '<p style="text-align: center; color: #7b8ca6; font-style: italic;">No comments yet. Be the first to comment!</p>';
        } else {
            commentsList.innerHTML = projectComments.map(comment => `
                <div class="comment-item">
                    <div class="comment-header">
                        <div class="comment-author">${comment.author}</div>
                        <div class="comment-date">${new Date(comment.date).toLocaleDateString()}</div>
                    </div>
                    <div class="comment-text">${comment.text}</div>
                </div>
            `).join('');
        }
    }
    
    function addComment() {
        const username = localStorage.getItem('username');
        if (!username) {
            alert('Please sign in to add comments.');
            return;
        }
        
        const commentText = document.getElementById('commentInput').value.trim();
        if (!commentText) {
            alert('Please enter a comment.');
            return;
        }
        
        if (!currentProjectForComments) {
            alert('No project selected for comment.');
            return;
        }
        
        // Get existing comments
        const comments = JSON.parse(localStorage.getItem('projectComments') || '{}');
        if (!comments[currentProjectForComments]) {
            comments[currentProjectForComments] = [];
        }
        
        // Add new comment
        comments[currentProjectForComments].push({
            author: username,
            text: commentText,
            date: new Date().toISOString()
        });
        
        // Save to localStorage
        localStorage.setItem('projectComments', JSON.stringify(comments));
        
        // Update UI
        loadComments(currentProjectForComments);
        document.getElementById('commentInput').value = '';
        
        // Update project comments count
        loadProjects(window._lastFilters || {}, window._lastSearch || '');
    }
    
    // Update loadProjects function to show like status and comments count
    function loadProjects(filters = {}) {
        window._lastFilters = filters;
        const listEl = document.getElementById('discover-projects-list');
        let filtered = [...projects];
        
        const username = localStorage.getItem('username');
        const userLikes = JSON.parse(localStorage.getItem('userLikes') || '{}');
        const projectLikes = JSON.parse(localStorage.getItem('projectLikes') || '{}');
        const projectComments = JSON.parse(localStorage.getItem('projectComments') || '{}');
        
        // Update projects with like status and comments count
        filtered = filtered.map(project => {
            const isLiked = userLikes[username] && userLikes[username].includes(project.title);
            const originalLikes = project.likes || 0;
            const additionalLikes = projectLikes[project.title] || 0;
            const totalLikes = originalLikes + additionalLikes;
            const commentCount = (projectComments[project.title] || []).length;
            
            return {
                ...project,
                liked: isLiked,
                likes: totalLikes,
                comments: commentCount
            };
        });
        
        // Kategori (çoklu)
        if (filters.categories && filters.categories.length > 0) {
            filtered = filtered.filter(p => filters.categories.includes(p.category));
        }
        // Durum (çoklu)
        if (filters.statuses && filters.statuses.length > 0) {
            filtered = filtered.filter(p => filters.statuses.includes(p.status));
        }
        // Beğeni (min)
        if (filters.minLikes) {
            filtered = filtered.filter(p => (p.likes || 0) >= filters.minLikes);
        }
        // Sıralama
        if (filters.sort === 'most-liked') {
            filtered = filtered.sort((a, b) => b.likes - a.likes);
        } else if (filters.sort === 'newest') {
            filtered = filtered.sort((a, b) => b.title.localeCompare(a.title));
        } else if (filters.sort === 'most-funded') {
            filtered = filtered.sort((a, b) => (b.funding || 0) - (a.funding || 0));
        }
        
        if (filtered.length > 0) {
            listEl.innerHTML = filtered.map(project => `
                <div class="project-card">
                    ${project.isDemo ? '<div class="demo-badge">Demo</div>' : '<div class="demo-badge" style="background: #10b981; color: white;">Live</div>'}
                    <button class="fav-btn${isFav(project.title) ? ' fav' : ''}" title="Favorilere ekle/kaldır" onclick="toggleFav('${project.title.replace(/'/g, "\\'") }')">
                        ${isFav(project.title) ? '❤️' : '🤍'}
                    </button>
                    <div class="logo">${project.logo || '🚀'}</div>
                    <div class="tags">${(project.tags||[]).map(tag => `<span class='tag'>${tag}</span>`).join('')}</div>
                    <h2>${project.title}</h2>
                    <p>${project.description}</p>
                    <div class="stats">
                        <span>💬 ${project.comments || 0} comments</span>
                        <span>👥 ${project.investors || 0} investors</span>
                        <span>💰 %${project.funding}</span>
                    </div>
                    <small>Category: ${project.category || ''} | Created by: ${project.creator || ''}</small><br>
                    <small>Likes: ${project.likes || 0} | Status: ${project.status || ''}</small>
                    ${project.badge ? `<span class=\"badge\">${project.badge}</span>` : ''}
                    <div class="project-actions">
                        <button class="like-btn ${project.liked ? 'liked' : ''}" onclick="toggleLike('${project.title.replace(/'/g, "\\'")}')" data-liked="${project.liked || false}">
                            ${project.liked ? '❤️' : '🤍'} ${project.likes || 0}
                        </button>
                        <button class="comment-btn" onclick="showComments('${project.title.replace(/'/g, "\\'")}')">
                            💬 ${project.comments || 0}
                        </button>
                        <button class="details-btn" onclick='showModal(${JSON.stringify(project).replace(/'/g, "\\'") })'>Details</button>
                    </div>
                </div>
            `).join('');
        } else {
            listEl.innerHTML = '<p>No projects found.</p>';
        }
    }
    
    // Close comments modal when clicking outside
    document.getElementById('commentsModal').addEventListener('click', function(e) {
        if (e.target === this) {
            closeComments();
        }
    });
    
    // Favorites functionality
    function showFavorites() {
        const username = localStorage.getItem('username');
        const userType = localStorage.getItem('userType');
        
        if (!username) {
            alert('Please sign in to view favorites.');
            return;
        }
        
        if (userType !== 'investor') {
            alert('Favorites are only available for investors.');
            return;
        }
        
        document.getElementById('favoritesModal').style.display = 'block';
        loadFavorites();
    }
    
    function closeFavorites() {
        document.getElementById('favoritesModal').style.display = 'none';
    }
    
    function loadFavorites() {
        const username = localStorage.getItem('username');
        const userLikes = JSON.parse(localStorage.getItem('userLikes') || '{}');
        const userFavorites = userLikes[username] || [];
        const favoritesList = document.getElementById('favoritesList');
        
        if (userFavorites.length === 0) {
            favoritesList.innerHTML = '<p style="text-align: center; color: #7b8ca6; font-style: italic;">No favorite projects yet. Start exploring and like some projects!</p>';
            return;
        }
        
        // Filter projects to show only favorites
        const favoriteProjects = projects.filter(project => userFavorites.includes(project.title));
        
        favoritesList.innerHTML = favoriteProjects.map(project => {
            const originalLikes = project.likes || 0;
            const additionalLikes = JSON.parse(localStorage.getItem('projectLikes') || '{}')[project.title] || 0;
            const totalLikes = originalLikes + additionalLikes;
            
            return `
                <div class="comment-item">
                    <div class="comment-header">
                        <div class="comment-author">${project.title}</div>
                        <div class="comment-date">${project.category}</div>
                    </div>
                    <div class="comment-text">${project.description}</div>
                    <div style="margin-top: 12px;">
                        <button class="like-btn liked" onclick="toggleLike('${project.title.replace(/'/g, "\\'")}'); loadFavorites();">
                            ❤️ ${totalLikes}
                        </button>
                        <button class="comment-btn" onclick="showComments('${project.title.replace(/'/g, "\\'")}')">
                            💬 ${project.comments || 0}
                        </button>
                        <button class="details-btn" onclick='showModal(${JSON.stringify(project).replace(/'/g, "\\'") })'>
                            Details
                        </button>
                    </div>
                </div>
            `;
        }).join('');
    }
    
    // Close favorites modal when clicking outside
    document.getElementById('favoritesModal').addEventListener('click', function(e) {
        if (e.target === this) {
            closeFavorites();
        }
    });
    

    
    // Sayfa yüklendiğinde başlat
    window.addEventListener('DOMContentLoaded', () => {
        prepareSearchData();
        loadFeaturedUsers();
        loadRealUserProjects(); // Load real projects first
        setupDiscoverFilters();
        setupAdvancedSearch();
    });
    </script>
</body>
</html> 